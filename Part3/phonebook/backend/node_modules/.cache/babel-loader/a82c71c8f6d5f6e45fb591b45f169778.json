{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\charlie\\\\Documents\\\\GitHub\\\\fullStackSubmission\\\\Part3\\\\phonebook\\\\frontend\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport react, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport personService from './persons';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Persons = _ref => {\n  let {\n    persons,\n    setPersons\n  } = _ref;\n\n  const confirmDelete = person => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService.del(person.id);\n      setPersons(persons.filter(existing => existing.id !== person.id));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: persons.map(person => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [person.name, \" \", person.number, \"  \", /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => confirmDelete(person),\n          children: \"delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 19,\n          columnNumber: 62\n        }, this)]\n      }, person.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Persons;\n\nconst Filter = props => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Filter shown with \", /*#__PURE__*/_jsxDEV(\"input\", {\n      value: props.newFilter,\n      onChange: props.handleFilterChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 25\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n};\n\n_c2 = Filter;\n\nconst PersonForm = props => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: props.addPerson,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"name: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: props.newName,\n          onChange: props.handleNameChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 20\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"number: \", /*#__PURE__*/_jsxDEV(\"input\", {\n          value: props.newNumber,\n          onChange: props.handleNumberChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n\n_c3 = PersonForm;\n\nconst Success = _ref2 => {\n  let {\n    message\n  } = _ref2;\n\n  if (message === null) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"success\",\n    children: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n\n_c4 = Success;\n\nconst Error = _ref3 => {\n  let {\n    message\n  } = _ref3;\n\n  if (message === null) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: message\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n\n_c5 = Error;\n\nconst App = () => {\n  _s();\n\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [newFilter, setNewFilter] = useState('');\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = event => {\n    event.preventDefault();\n    const personObj = {\n      name: newName,\n      number: newNumber\n    };\n\n    if (persons.some(person => person.name == newName)) {\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)) {\n        const toUpdate = persons.find(person => person.name === newName);\n        personService.update(toUpdate.id, personObj).then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== toUpdate.id ? person : returnedPerson));\n          setSuccessMessage(`Phone number succesfuly updated`);\n          setTimeout(() => {\n            setSuccessMessage(null);\n          }, 5000);\n          setNewName('');\n          setNewNumber('');\n        }).catch(error => {\n          setErrorMessage(`Information of ${personObj.name} has already been removed from server`);\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n      }\n    } else if (persons.some(person => person.number == newNumber)) {\n      alert(newNumber + ' phone number is already added to the phonebook');\n    } else {\n      personService.create(personObj).then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        setSuccessMessage(`${personObj.name} succesfully added`);\n        setTimeout(() => {\n          setSuccessMessage(null);\n        }, 5000);\n        setNewName('');\n        setNewNumber('');\n      }).catch(error => {\n        console.log(error);\n        setErrorMessage(`Information of ${error.response.data} has already been removed from server`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 5000);\n      });\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = event => {\n    setNewFilter(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Phonebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Success, {\n      message: successMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Error, {\n      message: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Filter, {\n      newFilter: newFilter,\n      handleFilterChange: handleFilterChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add a new\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PersonForm, {\n      newName: newName,\n      newNumber: newNumber,\n      addPerson: addPerson,\n      handleNumberChange: handleNumberChange,\n      handleNameChange: handleNameChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Numbers\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Persons, {\n      persons: persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase())),\n      setPersons: setPersons\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"I/lnhfsCdWuNZMlOXmRuhKyt4VM=\");\n\n_c6 = App;\nexport default App;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Persons\");\n$RefreshReg$(_c2, \"Filter\");\n$RefreshReg$(_c3, \"PersonForm\");\n$RefreshReg$(_c4, \"Success\");\n$RefreshReg$(_c5, \"Error\");\n$RefreshReg$(_c6, \"App\");","map":{"version":3,"sources":["C:/Users/charlie/Documents/GitHub/fullStackSubmission/Part3/phonebook/frontend/src/App.js"],"names":["react","useState","useEffect","axios","personService","Persons","persons","setPersons","confirmDelete","person","window","confirm","name","del","id","filter","existing","map","number","Filter","props","newFilter","handleFilterChange","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","Success","message","Error","App","setNewName","setNewNumber","setNewFilter","successMessage","setSuccessMessage","errorMessage","setErrorMessage","getAll","then","initialPersons","event","preventDefault","personObj","some","toUpdate","find","update","returnedPerson","setTimeout","catch","error","alert","create","concat","console","log","response","data","target","value","toLowerCase","includes"],"mappings":"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","sourcesContent":["import react, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport personService from './persons'\nimport './index.css'\n\nconst Persons = ({ persons, setPersons }) => {\n\n  const confirmDelete = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)){\n      personService\n      .del(person.id)\n      setPersons(persons.filter(existing => existing.id !== person.id))\n    }\n  }\n  return (\n    <div>\n      <ul>\n        {persons.map(person => \n          <li key={person.id}>{person.name} {person.number}  <button onClick={() => confirmDelete(person)}>delete</button></li>\n          )}\n      </ul>\n    </div>\n  )\n}\n\nconst Filter = (props) => {\n  return(\n    <div>\n      Filter shown with <input value={props.newFilter} onChange={props.handleFilterChange}/>\n    </div>\n  )\n}\n\nconst PersonForm = (props) => {\n  return(\n    <div>\n      <form onSubmit={props.addPerson}>\n        <div>name: <input value={props.newName} onChange={props.handleNameChange} /></div>\n        <div>number: <input value={props.newNumber} onChange={props.handleNumberChange} /></div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nconst Success = ({ message }) => {\n  if (message === null){\n    return null\n  }\n  return (\n    <div className='success'>\n      {message}\n    </div>\n  )\n}\n\nconst Error = ({ message }) => {\n  if (message === null){\n    return null\n  }\n  return (\n    <div className='error'>\n      {message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([\n  ])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newFilter, setNewFilter] = useState('')\n  const [successMessage, setSuccessMessage] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n    .getAll()\n    .then(initialPersons => {\n      setPersons(initialPersons)\n    })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObj = {name: newName, number: newNumber}\n\n    if (persons.some(person => person.name == newName)){\n      if (window.confirm(`${newName} is already added to the phonebook, replace the old number with a new one?`)){\n        const toUpdate = persons.find(person => person.name === newName)\n        personService\n        .update(toUpdate.id, personObj)\n        .then(returnedPerson => {\n          setPersons(persons.map(person => person.id !== toUpdate.id ? person : returnedPerson) )\n          setSuccessMessage(`Phone number succesfuly updated`)\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n          setNewName('')\n          setNewNumber('')\n        })\n        .catch(error => {\n          setErrorMessage(`Information of ${personObj.name} has already been removed from server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n      }\n    } else if (persons.some(person => person.number == newNumber)){\n      alert(newNumber + ' phone number is already added to the phonebook')\n    } else {\n      personService\n      .create(personObj)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson))\n        setSuccessMessage(`${personObj.name} succesfully added`)\n        setTimeout(() => {\n          setSuccessMessage(null)\n        }, 5000)\n        setNewName('')\n        setNewNumber('')\n      })\n      .catch(error => {\n        console.log(error)\n        setErrorMessage(`Information of ${error.response.data} has already been removed from server`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    }\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Success message={successMessage}/>\n      <Error message={errorMessage}/>\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange}/>\n      <h3>Add a new</h3>\n      <PersonForm newName={newName} \n      newNumber={newNumber} \n      addPerson={addPerson} \n      handleNumberChange={handleNumberChange} \n      handleNameChange={handleNameChange}\n      />\n      <h3>Numbers</h3>\n      <Persons persons={persons.filter(person =>person.name.toLowerCase().includes(newFilter.toLowerCase()))} setPersons={setPersons}/>\n    </div>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}